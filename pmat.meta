using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;

public class PanelMaterial : MonoBehaviour
{
    private Texture2D[] textures;
    public GameObject content;
    public GameObject panelPrefab; // Renamed for clarity

    // Start is called before the first frame update
    void Start()
    {
        LoadTextures();
        CreatePanels();
    }

    // Load all textures from the Resources/panels folder
    private void LoadTextures()
    {
        textures = Resources.LoadAll<Texture2D>("panels");
    }

    // Create panels and assign textures
    private void CreatePanels()
    {
        foreach (Texture2D texture in textures)
        {
            GameObject newPanel = Instantiate(panelPrefab, content.transform);
            Image panelImage = newPanel.GetComponent<Image>();
            panelImage.sprite = Sprite.Create(texture, new Rect(0, 0, texture.width, texture.height), new Vector2(0.5f, 0.5f));
        }

        AdjustContentSize();
    }

    // Adjust the size of the content to fit all panels
    private void AdjustContentSize()
    {
        RectTransform contentRect = content.GetComponent<RectTransform>();
        GridLayoutGroup gridLayout = content.GetComponent<GridLayoutGroup>();

        if (gridLayout != null)
        {
            int totalPanels = textures.Length;
            float totalWidth = totalPanels * (gridLayout.cellSize.x + gridLayout.spacing.x);
            contentRect.sizeDelta = new Vector2(totalWidth, contentRect.sizeDelta.y);
        }
    }

    // Update is called once per frame
    void Update()
    {

    }
}
